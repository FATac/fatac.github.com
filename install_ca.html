
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Requisits &mdash; FAT Arts Combinatòries 1.0a1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FAT Arts Combinatòries 1.0a1 documentation" href="index.html" />
    <link rel="next" title="Migració" href="migracio.html" />
    <link rel="prev" title="Introducció" href="introduction_ca.html" />
<link type="text/css" href="_static/fatdoc.css" rel="stylesheet">

  </head>
  <body>
<div class="header">
    <a href="#">
        <img alt="Logo" src="_static/logo.jpg" class="logo" />
    </a>
</div>
    

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="migracio.html" title="Migració"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction_ca.html" title="Introducció"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FAT Arts Combinatòries 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Requisits</a><ul>
<li><a class="reference internal" href="#sistema-operatiu">Sistema operatiu</a></li>
<li><a class="reference internal" href="#software-base-i-llibreries">Software base i llibreries</a></li>
</ul>
</li>
<li><a class="reference internal" href="#installacio-de-software-base-i-llibreries">Instal·lació de software base i llibreries</a></li>
<li><a class="reference internal" href="#installacio-d-arts-combinatories">Instal·lació d&#8217;Arts Combinatòries</a><ul>
<li><a class="reference internal" href="#arrencada-dels-serveis-relacionats-amb-arts-combinatories">Arrencada dels serveis relacionats amb Arts Combinatòries</a></li>
<li><a class="reference internal" href="#serveis-de-video">Serveis de vídeo</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction_ca.html"
                        title="previous chapter">Introducció</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="migracio.html"
                        title="next chapter">Migració</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/install_ca.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <p>En aquest apartat s&#8217;indiquen totes les passes per tal de posar en marxa una instància de tota la pila de software i serveis necessaris per al funcionament d&#8217;una instància del projecte Arts Combinatòries.</p>
<div class="section" id="requisits">
<h1>Requisits<a class="headerlink" href="#requisits" title="Permalink to this headline">¶</a></h1>
<p>Cal satisfer una sèrie de requisits previs que es detallen a continuació.</p>
<div class="section" id="sistema-operatiu">
<h2>Sistema operatiu<a class="headerlink" href="#sistema-operatiu" title="Permalink to this headline">¶</a></h2>
<p>Actualment, degut a limitacions tecnològiques, el entorn del projecte només pot executar-se sobre màquines *nix. En aquests documents suposarem una màquina basada en una distribució Ubuntu Linux 11.04 (Natty).</p>
</div>
<div class="section" id="software-base-i-llibreries">
<h2>Software base i llibreries<a class="headerlink" href="#software-base-i-llibreries" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>GCC i eines de compilació</li>
<li>Python 2.6 (altres versions NO funcionen per Plone 4)</li>
<li>Python Distribute (a.k.a setuptools)</li>
<li>Python Imaging Library instal·lat per l&#8217;intèrpret de Python anterior (més informació en l&#8217;apartat corresponent)</li>
<li>Gawk</li>
<li>Git</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="installacio-de-software-base-i-llibreries">
<h1>Instal·lació de software base i llibreries<a class="headerlink" href="#installacio-de-software-base-i-llibreries" title="Permalink to this headline">¶</a></h1>
<p>Instal·lació de Python 2.6 i altres llibreries:</p>
<div class="highlight-python"><pre>sudo apt-get install python2.6 python-imaging wget build-essential python2.6-dev python-setuptools git-core</pre>
</div>
<p>Instal·lació de Python Distribute:</p>
<div class="highlight-python"><pre>wget http://python-distribute.org/distribute_setup.py
sudo python2.6 distribute_setup.py</pre>
</div>
<p>Instal·lació de Gawk:</p>
<div class="highlight-python"><pre>sudo apt-get install gawk</pre>
</div>
</div>
<div class="section" id="installacio-d-arts-combinatories">
<h1>Instal·lació d&#8217;Arts Combinatòries<a class="headerlink" href="#installacio-d-arts-combinatories" title="Permalink to this headline">¶</a></h1>
<p>Arts Combinatòries utilitza un sistema de montatge (descàrrega, compilació i configuració) automàtic anomenat <a class="reference external" href="http://www.buildout.org">Buildout</a>.</p>
<p>Aquest sistema utilitza un fitxer (<cite>buildout.cfg</cite>) de configuració que contenen tota la informació necessària per a construir un entorn complet i configurat.</p>
<p>Per començar ens baixarem de Github el codi executant la següent ordre:</p>
<div class="highlight-python"><pre>git clone git://github.com/FATac/fatac.buildout.git</pre>
</div>
<p>Fet això, ens ha d&#8217;haver creat un nou directori <cite>fatac.buildout</cite>. Accedim a ell:</p>
<div class="highlight-python"><pre>cd fatac.buildout</pre>
</div>
<p>Executem el muntatge amb aquestes ordres:</p>
<div class="highlight-python"><pre>python2.6 bootstrap.py
./bin/buildout</pre>
</div>
<p>Un cop finalitzat, ens situem a la carpeta contenidora de la carpeta &#8220;fatac.buildout&#8221; i executem:</p>
<div class="highlight-python"><pre>useradd plone
chown -R plone:plone fatac.buildout/</pre>
</div>
<p>Instal·lació automàtica del lighttpd:</p>
<div class="highlight-python"><pre>apt-get install lighttpd</pre>
</div>
<p>Cal afegir les aplicacions web del Tomcat (arxius .WAR a la carpeta &#8220;webapps&#8221;), que trobareu als llocs següents:</p>
<blockquote>
<div><ul class="simple">
<li>Serveis REST d&#8217;Arts Combinatòries: <a class="reference external" href="https://github.com/FATac/ArtsCombinatoriesRest/blob/develop/WebContent/WEB-INF/ArtsCombinatoriesRest.war">https://github.com/FATac/ArtsCombinatoriesRest/blob/develop/WebContent/WEB-INF/ArtsCombinatoriesRest.war</a></li>
<li>Motor de cerca Solr: <a class="reference external" href="http://lucene.apache.org/solr/">http://lucene.apache.org/solr/</a> (a &#8220;Download&#8221;)</li>
<li>Servidor OAI-PMH: <a class="reference external" href="http://code.google.com/p/oaicat/downloads/detail?name=oaicat.war">http://code.google.com/p/oaicat/downloads/detail?name=oaicat.war</a></li>
</ul>
</div></blockquote>
<p><strong>Nota</strong> Alguns serveis com Virtuoso i el servidor d&#8217;aplicacions Tomcat necessiten una configuració posterior que depén del vostre entorn i necessitats, tal i com es detalla en el apartat <cite>Configuració</cite> d&#8217;aquesta mateixa documentació.</p>
<div class="section" id="arrencada-dels-serveis-relacionats-amb-arts-combinatories">
<h2>Arrencada dels serveis relacionats amb Arts Combinatòries<a class="headerlink" href="#arrencada-dels-serveis-relacionats-amb-arts-combinatories" title="Permalink to this headline">¶</a></h2>
<p>Els processos necessaris per al bon funcionament del servei són:</p>
<blockquote>
<div><ul class="simple">
<li>Plone (frontend)</li>
<li>Tomcat (API REST)</li>
<li>Virtuoso (BBDD)</li>
<li>Lighttpd (Servidor HTTP per l&#8217;streaming - opcional)</li>
</ul>
</div></blockquote>
<p>Plone:</p>
<div class="highlight-python"><pre>(directori plone)/bin/instance start</pre>
</div>
<p><strong>Nota</strong> La primera vegada cal crear des de <a class="reference external" href="http://urlservidor:8084/">http://urlservidor:8084/</a> el &#8220;Plone site&#8221; i escollir l&#8217;Add-on &#8220;fatac.theme&#8221;.</p>
<p>Tomcat:</p>
<div class="highlight-python"><pre>(directori tomcat)/bin/startup.sh</pre>
</div>
<p>Virtuoso:</p>
<div class="highlight-python"><pre>cd (directori virtuoso)/var/lib/virtuoso/db/
../../../../bin/virtuoso-t -f &amp;</pre>
</div>
<p>Lighttpd:</p>
<div class="highlight-python"><pre>cd /etc/lighttpd/
lighttpd -f lighttpd.conf</pre>
</div>
</div>
<div class="section" id="serveis-de-video">
<h2>Serveis de vídeo<a class="headerlink" href="#serveis-de-video" title="Permalink to this headline">¶</a></h2>
<p>La instal·lació dels serveis de vídeo consta de dues parts: una primera aplicació web Java i  després una llibreria nativa que ajuda en la codificació del vídeo.</p>
<ol class="arabic simple">
<li>Instal·lació del servei web</li>
</ol>
<p>Bàsicament cal desplegar el fitxer TapiesWebServices.war dins del servidor d’aplicacions Tomcat. Aquest war ja disposa de una configuració de perfils predeterminada (fitxer profile.xml) de manera que no cal configurar res més. En tot cas, si calen afegir nous perfils per diferents formats d’àudio aquesta informació esta a la guia de configuració.</p>
<ol class="arabic simple" start="2">
<li>Instal·lació de la llibreria nativa Xuggler</li>
</ol>
<p>Tot el software necessari esta preparat en un programa auto-instal·lador. Nomes cal executar-lo (normalment amb permisos d’administrador perquè pugui accedir a les carpetes necessàries.</p>
<div class="highlight-python"><pre>sudo sh ./xuggle-xuggler.4.0.1084-i686-pc-linux-gnu.sh</pre>
</div>
<p>Cal confirmar la instal·lació escrivint ‘yes’ i podem deixar el directori d’instal.lació per defecte.</p>
<p>2.1 Comprovació de les llibreries natives.</p>
<p>A la carpeta /usr/local/xuggler/bin podem trobar els binaris del xuggler. Si executem per exemple el programa ffmpeg hauria de surtir la informació de versió:</p>
<div class="highlight-python"><pre>ffmpeg version 0.8.git-xuggle-4.0.revision.sh, Copyright (c) 2000-2011 the FFmpeg developers
  built on Nov 21 2011 09:31:08 with gcc 4.6.1
  configuration: --prefix=/usr/local/xuggler --extra-version=xuggle-4.0.revision.sh --extra-cflags=-I/home/javi/Desktop/xuggle-xuggler-modified/build/native/i686-pc-linux-gnu/captive/usr/local/xuggler/include --extra-ldflags=-L/home/javi/Desktop/xuggle-xuggler-modified/build/native/i686-pc-linux-gnu/captive/usr/local/xuggler/lib --enable-shared --enable-gpl --enable-nonfree --enable-version3 --enable-libx264 --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libspeex --enable-libvpx --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-pthreads
  libavutil    51. 11. 0 / 51. 11. 0
  libavcodec   53.  8. 0 / 53.  8. 0
  libavformat  53.  6. 0 / 53.  6. 0
  libavdevice  53.  2. 0 / 53.  2. 0
  libavfilter   2. 27. 0 /  2. 27. 0
  libswscale    2.  0. 0 /  2.  0. 0
  libpostproc  51.  2. 0 / 51.  2. 0
Use -h to get full help or, even better, run 'man ffmpeg'</pre>
</div>
<p>En cas de que el sistema li falti alguna llibreria nativa, caldrà instal.lar-la depenent de la distribució de Linux que es faci servir.</p>
<p>En el cas de la distribució Ubuntu 11.10 per equips de 32 bits no cal afegir cap llibreria addicional.</p>
<p>En el cas de la Ubuntu 11.10 per equips de 64 bits, cal afegir les llibreries de compatibilitat.</p>
<div class="highlight-python"><pre>sudo apt-get install ia32-libs</pre>
</div>
<p>2.2  Afegir el Xuggler al Tomcat</p>
<p>Copiem de /usr/local/xuggler/share/java/jars totes les dependències a la carpeta %TOMCAT_HOME%/lib . Més concretament són els fitxers:</p>
<ul class="simple">
<li>logback-classic.jar</li>
<li>logback-core.jar</li>
<li>commons-cli.jar</li>
<li>slf4j-api.jar</li>
<li>xuggle-xuggler.jar</li>
</ul>
<p>Per últim cal configurar el tomcat per trobi les llibreries Xuggler. afegim les rutes d’accés al script d’arranc del tomcat %TOMCAT_HOME%/bin/startup.sh:</p>
<div class="highlight-python"><pre>export XUGGLE_HOME=/usr/local/xuggler
export LD_LIBRARY_PATH=$XUGGLE_HOME/lib:$LD_LIBRARY_PATH
export PATH=$XUGGLE_HOME/bin:$PATH</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="migracio.html" title="Migració"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction_ca.html" title="Introducció"
             >previous</a> |</li>
        <li><a href="index.html">FAT Arts Combinatòries 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, FAT - UPCnet.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2b1.
    </div>
  </body>
</html>