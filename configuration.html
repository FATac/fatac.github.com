


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &mdash; FAT Arts Combinatòries 1.0a1 documentation</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="FAT Arts Combinatòries 1.0a1 documentation" href="index.html" />
    <link rel="next" title="Managing data" href="managing_data.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
<link type="text/css" href="_static/fatdoc.css" rel="stylesheet">

  </head>
  <body>
<div class="header">
    <a href="#">
        <img alt="Logo" src="_static/logo.jpg" class="logo" />
    </a>
</div>
    

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="managing_data.html" title="Managing data"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">FAT Arts Combinatòries 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Configuration</a><ul>
<li><a class="reference internal" href="#step-1-main-properties">Step 1: Main properties</a></li>
<li><a class="reference internal" href="#step-2-legal-script">Step 2: Legal script</a></li>
<li><a class="reference internal" href="#step-3-data-mapping">Step 3: Data mapping</a></li>
<li><a class="reference internal" href="#step-4-object-template">Step 4: Object template</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="managing_data.html"
                        title="next chapter">Managing data</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/configuration.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="configuration">
<h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>There are several aspects that must be defined in order to get the Semantic Web (SW) working with a new Ontology. This configuration guide is organized step-by-step.</p>
<div class="section" id="step-1-main-properties">
<h2>Step 1: Main properties<a class="headerlink" href="#step-1-main-properties" title="Permalink to this headline">¶</a></h2>
<p>Once installed (see Installation), the first thing we have to do is to configure the &#8216;config.properties&#8217; file, you may place them on your current directory. Here&#8217;s a sample with detailed explanations:</p>
<div class="highlight-python"><pre># Core application supports thumbnail generation for any kind of object that may or may not contain data. Set thumbnail width and length in pixels.
    THUMBNAIL_WIDTH = 250
    THUMBNAIL_HEIGHT = 180

# Video format extensions that are eligible for conversion to open format (OGV)
    VIDEO_FILE_EXTENSIONS = dv,mpg,avi

# Language code list that should be considered to be in ontology.

# Languages that are not in the list are ignored. The first language on the list is considered as default language
    LANG_LIST = ca,en,es,fr,it,de

# Services base URLs and connection strings
    RDFDB_URL = jdbc:virtuoso://localhost:1111
    RDFDB_USER =
    RDFDB_PASS =

# URL of REST services ideally reachable from any Internet location
    REST_URL = http://internetdomain.org/rest-path/

# URL of Solr search engine, local or not
    SOLR_URL = http://localhost:8080/solr/

# URL of Video conversion services, local or not
    VIDEO_SERVICES_URL = http://localhost:8080/video-services/rest/

# Own ontology and data resource namespaces. Notice that data and ontology is reparated for flexibility purposes
    ONTOLOGY_URI_NS = http://internetdomain.org/rest-path/ontology/ac#
    ONTOLOGY_PREFIX = ac
    RESOURCE_URI_NS = http://internetdomain.org/rest-path/resource/
    RESOURCE_PREFIX = ac_res
    RDF_URI_NS = http://www.w3.org/1999/02/22-rdf-syntax-ns#
    RDFS_URI_NS = http://www.w3.org/2000/01/rdf-schema#

# ATENTION: LinkedData best practices requires that RESOURCE_URI_NS, ONTOLOGY_URI_NS and REST_URL should have the same uri base (as specified in this sample) for REST services 'ontology' and 'resource' are implemented.

# Also, ONTOLOGY_URI_NS termination must coincide with ONTOLOGY_PREFIX plus '#' character

# Json directory containing object templates and mapping specifications
    CONFIGURATIONS_PATH = /var/ac-project/json/

# Solr base directory to access schema. This folder must placed where Solr can reach it (usually in current directory)
    SOLR_PATH = /mycurrentdirectory/solr/

# Media directory where all uploaded media filles will be stored, it must contain 'thumbnail' subfolder, and 'classes' subsubfolder inside
    MEDIA_PATH = ./var/ac-project/media/

# Path to OWL file containing the main Ontology. This file will be uploaded on every call to 'reset' service.
    ONTOLOGY_PATH = /var/ac-project/OntologiaArtsCombinatories.owl</pre>
</div>
</div>
<div class="section" id="step-2-legal-script">
<h2>Step 2: Legal script<a class="headerlink" href="#step-2-legal-script" title="Permalink to this headline">¶</a></h2>
<p>AC provides capabilities for assigning legal rights to media objects. The right assignation is an user assisted process that can be scripted and fully customized. (If you have no intention to apply this feature you may skip this step).</p>
<p>There is a self-explanatory sample named &#8216;legal.json&#8217; in json directory, &#8216;legal&#8217; subfolder. &#8216;legal.json&#8217; is the name of the script file that will assist the user, the main parts of the script are:</p>
<ul class="simple">
<li>Start Block: starting block of the script</li>
<li>Blocks: list of blocks the process will run through.</li>
<li>Block name: name of block user for referencing it from other blocks</li>
<li>Block description: additional explanation of block aim</li>
<li>Block data: data that will be requested to user (as a user form) and will be used to resolve the right assignation. This data is considered global, so it can be reused or reassigned in further blocks.</li>
<li>Block rules: data evaluation using boolean expressions. It can result to a next block, indicaded by &#8216;block&#8217; keyword, or to a color indicated by &#8216;result&#8217; keyword. Color consequences is explained next.</li>
</ul>
<p>There are four &#8220;trafic light&#8221; colors that can be assigned to any object as a result of the legal process. From less to more restrictive: &#8220;green&#8221;, &#8220;yellow&#8221;, &#8220;orange&#8221; and &#8220;red&#8221;. Each of one corresponding to one accessing right level from 1 to 4. On every call to a service that provides media data, the accessing level must be specified. Service will fail if user accessing level is lower than object restriction level. Eg. User level = 1 , Object level = 2 &#8211;&gt; Fail / User level = 2 , Object level = 2 &#8211;&gt; OK.</p>
</div>
<div class="section" id="step-3-data-mapping">
<h2>Step 3: Data mapping<a class="headerlink" href="#step-3-data-mapping" title="Permalink to this headline">¶</a></h2>
<p>Data &#8220;mapping.json&#8221; (placed in json/mapping folder) is a must-have specification file that defines what ontology data must be indexed in Solr, and how this must be done. Data mapping is not a simple direct Owl to Solr mapping. It must be defined in a way that it later can be used for specific object domain searches (See Step 4), and provide additional information of the field nature to get Solr treating the data properly.</p>
<p>Let&#8217;s say we have the Person class defined in our Ontology, and that we want to indexate several useful person data such as: name, biography, date of birth and birth place. Person indexation should be specified this way:</p>
<div class="highlight-python"><pre>{
        "data":
        [
        {
            "name":"Name",                  // Specifies the data identifier, in this case, the person Name
            "type":"string",                // 'string' type means that values of Name will be treated as a whole
            "path":["Person.fullName"]      // Path to Class data property, note that it's specified as (Class-name).(property)
        },

        {
            "name":"Biography",
            "type":"text",                  // 'text' makes every word (space separated tokens) to be treated separately on search
            "path":["Person.Bio"]
        },

        {
            "name":"BirthDate",
            "type":"date.year",             // 'date.year' will extract the year part of date value (default date format expected is dd/mm/yyyy)
            "path":["Person.BirthDate"]
        },

        {
            "name":"BirthPlace",
            "type":"string",
            "path":["Person.BirthPlace:Location.Name"]   // Note that as Birth Place is not a string but an external object, specified path chains both objects, from original, to target data (Name property of Location class). You can chain as many objects as you need.
        }
    ]
}</pre>
</div>
<p>Note that path is a json array, this makes it possible to specify various object indexation. Let&#8217;s suppose that we want to indexate one more object: Locations (with property Name). Code should be modified as follows:</p>
<div class="highlight-python"><pre>"data":
    [
        {
            "name":"ObjectClass",           // This is not mandatory but totally recommended: As we have now more than one object type,
                                            // specifying this data, will allow filtering searches by object class.
            "type":"string",
            "path":["*.class"]              // We want no specific class by '*' character instead of class name,
                                            // and we use reserved word 'class' to get the indexated object class name.
                                            // 'superclass', and 'id' are also a reserved words, with obvious results.
        },

        {
            "name":"Name",
            "type":"string",
            "path":["Person.fullName", "Location.Name"]     // Path to Person and Location data property
        },

        /* rest of json ... */
    ]</pre>
</div>
<p>To provide proper searches, we can specify additional clauses for each data:</p>
<ul class="simple">
<li><strong>category</strong>: Solr searches will use &#8216;facets&#8217; feature to categorize specified data values by grouping and counting equal matches.</li>
<li><strong>multilingual</strong>: Applicable to data introduced in various languages in RDF database. For instance, a person biography can be written in different languages. This prevents Solr search from returning the same data in different languages.</li>
<li><strong>search</strong>: This might sound obvious that all mapped data should be user for search, but it&#8217;s not. There may be data that&#8217;s interesting only as a search result but not for searching in its string value. Unless you specify this clause, mapped data is not considered for searching.</li>
<li><strong>autocomplete</strong>: Only if you specified the previous clause, you can activate autocomplete to get this data in the autocomplete search.</li>
</ul>
<p>For example: &#8216;Name&#8217; data (that is, person and location name) is interesting for search and autocomplete. But Person name is specified in single language, and Location name is specified in different languages. Also, we find interesting to categorize results by locations but not by persons. According to all this, previous json code should change as follows:</p>
<div class="highlight-python"><pre>"data":
    [
        {
            "name":"Person",
            "type":"string",
            "path":["Person.fullName"],
            "search":"yes",
            "autocomplete":"yes"
        },

        {
            "name":"Location",
            "type":"string",
            "path":["Location.Name", "Person.BirthPlace:Location.Name"]
            "search":"yes",                     // Note that ALL clauses are unactive by default,
            "autocomplete":"yes",               // so they must be always specified in case of need.
            "multilingual":"yes",
            "category":"yes"
        }

        /* rest of json ... */
    ]</pre>
</div>
</div>
<div class="section" id="step-4-object-template">
<h2>Step 4: Object template<a class="headerlink" href="#step-4-object-template" title="Permalink to this headline">¶</a></h2>
<p>Any object search will finally lead to individual object visualization. This makes it necessary to build templates for any Ontology object that should be visualizable. Object view is organized in sections, and each section contains a list of mapped data, in a similar way we used it in previous step.</p>
<p>Going back to Person object class example: name, birth date, and birth place should be placed at header. Biography can be placed at body, we can also use a &#8216;knows&#8217; relation to get related Persons and we can place this at footer section. (Note that sections are totally customizable).</p>
<p>The resulting template file must be placed as &#8220;Person.json&#8221; (generally, (Class-name).json) in json/mapping directory. Code should look as follows:</p>
<div class="highlight-python"><pre>{
        "className":"Person",

        "sections":
        [
                {
                        "name":"header",                    // section name
                        "data":[

                            {
                                        "name":"Name",
                                        "type":"text",
                                        "path":["Person.fullName"]
                                },

                {
                                        "name":"BirthDate",
                                        "type":"date",
                                        "path":["Person.BirthDate"]
                                },

                {
                                        "name":"BirthPlace",
                                        "type":"linkedObject",
                                        "path":["Person.BirthPlace:Location.Name"]
                                }
                        ]
                },

                {
                        "name":"body",
                        "data":[

                            {
                                "name":"Biography",
                                "type":"text",
                                "path":["Person.Bio"]
                            }
                        ]
                },

        {
                        "name":"footer",
                        "data":[

                            {
                                        "name":"Related",
                                        "type":"search",
                    "path":["Person.id"],
                    "value":["RelatedPeople:"],
                    "categories":["Year", "Location"]
                                }
                        ]
                }
        ]
}</pre>
</div>
<p>Data &#8216;type&#8217; clause has not much to do with &#8216;type&#8217; defined in previous step. Previous template example we use all data types available for templates:</p>
<ul class="simple">
<li><strong>text</strong>: suitable for most cases, it shows data as it&#8217;s resolved with no modification.</li>
<li><strong>linkedObject</strong>: it shows resolved data path along with the referenced object id, separated by &#8216;&#64;&#8217;. For example: <a class="reference external" href="mailto:London&#37;&#52;&#48;my_london_id">London<span>&#64;</span>my_london_id</a>, this allows to create an hyperlink to the referenced object, which would be <a class="reference external" href="http://internetdomain.org/rest-path/resource/my_london_id/">http://internetdomain.org/rest-path/resource/my_london_id/</a>...</li>
<li><strong>date</strong>: and its parts (<strong>date.year</strong>, <strong>date.day</strong>, <strong>date.month</strong>). Same effect as date defined at step 3.</li>
<li><strong>search</strong>: this is a quite sophisticated object that comprises Solr searching feature from indexed data filtered by the specified constraint defined as combination of value and path. In this example: the search will only result to persons (&#8220;Person.knows:&#8221;) that know current person (&#8220;Person.id&#8221;). For detailed information about searches please see Visualization page.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="managing_data.html" title="Managing data"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">FAT Arts Combinatòries 1.0a1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, FAT - UPCnet.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>